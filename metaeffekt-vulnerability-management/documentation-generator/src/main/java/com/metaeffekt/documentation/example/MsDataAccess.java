package com.metaeffekt.documentation.example;

import com.metaeffekt.documentation.util.DocumentationProperties;
import com.metaeffekt.mirror.contents.msrcdata.MsrcProduct;
import com.metaeffekt.mirror.query.MsrcProductIndexQuery;

import java.util.List;

public class MsDataAccess {

    public static void main(String[] args) {
        // search for a product by name
        findMsProductId();
    }

    private static void findMsProductId() {
        final MsrcProductIndexQuery productIndexQuery = new MsrcProductIndexQuery(DocumentationProperties.getMirrorPath());

        // Example: Search for "Windows 10 Version 1809 for x64-based Systems"
        final String queryProduct = "Office";
        System.out.println("Search for product by name: " + queryProduct);

        final MsrcProduct exact = productIndexQuery.findProductByIdOrName(queryProduct);
        final List<MsrcProduct> fuzzy = productIndexQuery.findProductByNameFuzzyIfNoExactMatch(queryProduct);

        if (exact == null) {
            System.out.println("No exact match.");
        } else {
            System.out.println("Exact match: " + exact);
        }

        if (fuzzy.isEmpty()) {
            System.out.println("No fuzzy match.");
        } else {
            System.out.println("Fuzzy match:");
            fuzzy.forEach(System.out::println);
        }
    }
}
